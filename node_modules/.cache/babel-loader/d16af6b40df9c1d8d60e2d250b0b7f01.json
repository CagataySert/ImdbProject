{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport fetch from 'isomorphic-unfetch';\nimport { KEY } from './constants/constants.js';\n\nvar LocalStorageApi = function LocalStorageApi() {\n  _classCallCheck(this, LocalStorageApi);\n\n  this.addFilmToFavorite = function (filmId) {\n    return new _Promise(function (resolve, reject) {\n      var response = localStorage.getItem(KEY);\n\n      if (!!response) {\n        var filmArray = JSON.parse(response);\n        filmArray.push(filmId);\n        localStorage.setItem(KEY, _JSON$stringify(filmArray));\n        resolve();\n      } else {\n        localStorage.setItem(KEY, _JSON$stringify([filmId]));\n        resolve();\n      }\n    });\n  };\n};\n\nvar local_api = new LocalStorageApi();\nexport default local_api;","map":{"version":3,"sources":["C:\\Users\\cagat\\OneDrive\\Desktop\\Imdb\\serverApi_LocalStorage.js"],"names":["fetch","KEY","LocalStorageApi","addFilmToFavorite","filmId","resolve","reject","response","localStorage","getItem","filmArray","JSON","parse","push","setItem","local_api"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,SAASC,GAAT,QAAoB,0BAApB;;IAEMC,e;;;OAEFC,iB,GAAoB,UAACC,MAAD,EAAY;AAC5B,WAAO,aAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAEpC,UAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqBR,GAArB,CAAjB;;AAEA,UAAI,CAAC,CAACM,QAAN,EAAgB;AACZ,YAAIG,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWL,QAAX,CAAhB;AACAG,QAAAA,SAAS,CAACG,IAAV,CAAeT,MAAf;AAEAI,QAAAA,YAAY,CAACM,OAAb,CAAqBb,GAArB,EAA0B,gBAAeS,SAAf,CAA1B;AACAL,QAAAA,OAAO;AACV,OAND,MAOK;AACDG,QAAAA,YAAY,CAACM,OAAb,CAAqBb,GAArB,EAA0B,gBAAe,CAACG,MAAD,CAAf,CAA1B;AACAC,QAAAA,OAAO;AACV;AACJ,KAfM,CAAP;AAgBH,G;;;AAIL,IAAMU,SAAS,GAAG,IAAIb,eAAJ,EAAlB;AACA,eAAea,SAAf","sourcesContent":["import fetch from 'isomorphic-unfetch'\r\nimport { KEY } from './constants/constants.js';\r\n\r\nclass LocalStorageApi {\r\n\r\n    addFilmToFavorite = (filmId) => {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const response = localStorage.getItem(KEY);\r\n\r\n            if (!!response) {\r\n                let filmArray = JSON.parse(response);\r\n                filmArray.push(filmId);\r\n\r\n                localStorage.setItem(KEY, JSON.stringify(filmArray));\r\n                resolve();\r\n            }\r\n            else {\r\n                localStorage.setItem(KEY, JSON.stringify([filmId]));\r\n                resolve();\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nconst local_api = new LocalStorageApi();\r\nexport default local_api;"]},"metadata":{},"sourceType":"module"}